<!DOCTYPE html>
<html lang="zh-tw">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href='css/style.css'>
    <script src="https://cdn.jsdelivr.net/npm/swiper@9/swiper-bundle.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.3/jquery.min.js"></script>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <link rel="shortcut icon" type="image/png" href="./img/shortcut_logo.png">
    <title>購物車 SHOPPING_CART - 波波動物醫院</title>
</head>

<body class="SHOPPINGCART">
    <!-- =============== 共用元件 =============== -->

    <!-- ===== 會員彈窗 ===== -->
    <!-- user_popup -->
    @@include('./layout/user_popup.html')
    <!-- user_popup end -->

    <!-- =============== header =============== -->
    <!-- header -->
    @@include('./layout/header.html')
    <!-- header end -->

    <!-- =============== 網頁內容 =============== -->

    <section class="SHOPPINGCARTBG BACKGROUND">
        <div class="BG_CLOUDS">
            <div class="BG_CLOUD CLOUD_1">
                <img class="BG_CLOUD_IMG1" src="./img/CLOUD_BG.png" alt="">
            </div>
            <div class="BG_CLOUD CLOUD_2">
                <img class="BG_CLOUD_IMG2" src="./img/CLOUD_BG.png" alt="">
            </div>
        </div>

        <!-- ========================================================================================= -->

        <section class="CART01_SLOGANALL WRAPPER">
            <span class="JELLYFISH ANI J1"></span>
            <span>
                <img src="./img/shopping_cart/slogan01.png" alt="" class="SLOGAN01">
            </span>
            <span class="JELLYFISH ANI J2"></span>
        </section>

        <section class="CART01_SLOGANALL--M WRAPPER">
            <img src="./img/shopping_cart/slogan01M.png" alt="" class="SLOGAN01">
            <section class="JELLYFISHS">
                <span class="JELLYFISH ANI J1"></span>
                <span class="JELLYFISH ANI J2"></span>
                <span class="JELLYFISH ANI J1"></span>
            </section>
        </section>

        <!-- ======================================麵包屑========================================== -->

        <section class="BREAD WRAPPER">
            <a href="homepage.html">首頁</a>
            /
            <a>購物車</a>
        </section>

        <!-- ====================================購物車第一步驟=========================================== -->
        <section class="SHOPPINGCART_STEP WRAPPER">
            <section class="SHOPPINGCART_STEPAREA">
                <section class="SHOPPINGCART_ARCONE">
                    <div class="ARC_TITLE">1</div>
                    <p>購物車</p>
                </section>
                <section class="SHOPPINGCART_ARCTWO">
                    <div class="ARC_TITLE">2</div>
                    <p>填寫資料</p>
                </section>
                <section class="SHOPPINGCART_ARCTHREE">
                    <div class="ARC_TITLE">3</div>
                    <p>結帳成功</p>
                </section>
            </section>

            <!-- =====================================購物車登入==================================================== -->

            <section class="SHOPPINGCART_LOGIN">
                <p>已經是會員？登入可以更方便管理訂單喔！</p>
                <span class="LOGIN">登入會員</span>
            </section>

            <!-- =====================================購物商品列表==================================================== -->

            <section class="SHOPPINGCART_ITEMFORM">
                <section class="SHOPPINGCART_ITEMtitle">
                    <span class="ITEM_PRODUCT--W">商品</span>
                    <span class="ITEM_PRICE--W">單件價格</span>
                    <span class="ITEM_COUNT--W">數量</span>
                    <span class="ITEM_SUBTOTAL--W">小計</span>
                    <span class="ITEM_DELETE--W"></span>
                </section>
                <section class="SHOPPINGCART_ITEM">
                    <section class="ITEM_PRODUCT ITEM_PRODUCT--W">
                        <section class="ITEM_PRODUCT--IMG">
                            <img src="./img/shopping_list/healthy/01/healthy_01_01.jpg" alt="">
                        </section>
                        <span>沛威貓狗保健-護眼亮晶晶 30入/盒</span>
                    </section>
                    <section class="ITEM_PRICE ITEM_PRICE--W">
                        <p>NT＄<span class="CARTITEM_PRICE">1,380</span></p>
                    </section>
                    <section class="ITEM_COUNT ITEM_COUNT--W">
                        <span class="ITEM_COUNT--MINUS"><i class="bi bi-dash"></i></span>
                        <input type="number" class="ITEM_COUNT--NUM" value="1" min="1">
                        <!-- <span class="ITEM_COUNT--NUM">2</span> -->
                        <span class="ITEM_COUNT--PLUS"><i class="bi bi-plus"></i></span>
                    </section>
                    <section class="ITEM_SUBTOTAL ITEM_SUBTOTAL--W">
                        <p>NT＄<span class="CARTITEMSUBTOTAL"></span></p>
                    </section>
                    <section class="ITEM_DELETE ITEM_DELETE--W">
                        <i class="bi bi-trash3"></i>
                    </section>
                </section>

                <section class="SHOPPINGCART_ITEM">
                    <section class="ITEM_PRODUCT ITEM_PRODUCT--W">
                        <section class="ITEM_PRODUCT--IMG">
                            <img src="./img/shopping_list/dryfood/09/dryfood_09_01.jpg" alt="">
                        </section>
                        <span>【SC星益生趣】無穀貓糧(鮭魚配方) 2.5磅/1.1kg</span>
                    </section>
                    <section class="ITEM_PRICE ITEM_PRICE--W">
                        <p>NT＄<span class="CARTITEM_PRICE">980</span></p>
                    </section>
                    <section class="ITEM_COUNT ITEM_COUNT--W">
                        <span class="ITEM_COUNT--MINUS"><i class="bi bi-dash"></i></span>
                        <input type="number" class="ITEM_COUNT--NUM" value="1" min="1">
                        <!-- <span class="ITEM_COUNT--NUM">1</span> -->
                        <span class="ITEM_COUNT--PLUS"><i class="bi bi-plus"></i></span>
                    </section>
                    <section class="ITEM_SUBTOTAL ITEM_SUBTOTAL--W">
                        <p>NT＄<span class="CARTITEMSUBTOTAL"></span></p>
                    </section>
                    <section class="ITEM_DELETE ITEM_DELETE--W">
                        <i class="bi bi-trash3"></i>
                    </section>
                </section>

            </section>

            <!-- ==================================購物車LISTM=============================================== -->

            <section class="SHOPPINGCART_ITEMFORM--M">
                <h3>購物車</h3>
                <section class="SHOPPINGCART_ITEMLIST--M">
                    <section class="SHOPPINGCART_ITEM--M">
                        <section class="SHOPPINGCART_ITEMIMG--M">
                            <img src="./img/shopping_list/healthy/01/healthy_01_01.jpg" alt="">
                        </section>
                        <section class="SHOPPINGCART_ITEMWORD--M">
                            <section class="SHOPPINGCART_ITEMWORD--TOPM">
                                <section class="SHOPPINGCART_ITEMWORD--NAMEM">
                                    <span>沛威貓狗保健-護眼亮晶晶 30入/盒</span>
                                </section>
                                <section class="SHOPPINGCART_ITEMWORD--DELM">
                                    <i class="bi bi-trash3"></i>
                                </section>

                            </section>
                            <section class="SHOPPINGCART_ITEMWORD--BOTTOMM">
                                <section class="SHOPPINGCART_ITEMWORD--COUNTM">
                                    <span class="ITEM_COUNT--MINUS"><i class="bi bi-dash"></i></span>
                                    <input type="number" class="ITEM_COUNTM--NUM" value="1" min="1">
                                    <span class="ITEM_COUNT--PLUS"><i class="bi bi-plus"></i></span>
                                </section>
                                <section class="SHOPPINGCART_ITEMWORD--PRICEM">
                                    <p>NT＄<span class="CARTITEMSUBTOTALM">2,760</span></p>
                                </section>
                            </section>
                        </section>
                    </section>

                    <section class="SHOPPINGCART_ITEM--M">
                        <section class="SHOPPINGCART_ITEMIMG--M">
                            <img src="./img/shopping_list/dryfood/09/dryfood_09_01.jpg" alt="">
                        </section>
                        <section class="SHOPPINGCART_ITEMWORD--M">
                            <section class="SHOPPINGCART_ITEMWORD--TOPM">
                                <section class="SHOPPINGCART_ITEMWORD--NAMEM">
                                    <span>【SC星益生趣】無穀貓糧(鮭魚配方) 2.5磅/1.1kg</span>
                                </section>
                                <section class="SHOPPINGCART_ITEMWORD--DELM">
                                    <i class="bi bi-trash3"></i>
                                </section>

                            </section>
                            <section class="SHOPPINGCART_ITEMWORD--BOTTOMM">
                                <section class="SHOPPINGCART_ITEMWORD--COUNTM">
                                    <span class="ITEM_COUNT--MINUS"><i class="bi bi-dash"></i></span>
                                    <input type="number" class="ITEM_COUNTM--NUM" value="1" min="1">
                                    <span class="ITEM_COUNT--PLUS"><i class="bi bi-plus"></i></span>
                                </section>
                                <section class="SHOPPINGCART_ITEMWORD--PRICEM">
                                    <p><span class="CARTITEMSUBTOTALM">NT＄980</span></p>
                                </section>
                            </section>
                        </section>
                    </section>


                </section>
            </section>


            <!-- =================================購物車第一步驟下方3區塊===================================== -->

            <section class="SHOPPINGCART_STEPONETEXT">
                <section class="SHOPPINGCART_STEPONETEXT--LEFT COL-7 RWD-COL-12">
                    <section class="SHOPPINGCART_STEPONETEXT--FORM COUPON">
                        <section class="SHOPPINGCART_STEPONETEXT--TITLE">
                            <span>優惠促銷</span>
                        </section>
                        <section class="SHOPPINGCART_STEPONETEXT--SELECT">
                            <label for="CUPON" class="SELECT">已選擇之優惠<br>
                                <select id="CUPON" class="SELECTOPTION">
                                    <option value="">請選擇優惠劵</option>
                                    <option value="">台灣限定 滿千免運</option>
                                </select>
                            </label>
                        </section>
                    </section>
                    <section class="SHOPPINGCART_STEPONETEXT--FORM DELIVERY">
                        <section class="SHOPPINGCART_STEPONETEXT--TITLE">
                            <span>選擇送貨及付款方式</span>
                        </section>
                        <section class="SHOPPINGCART_STEPONETEXT--SELECT">
                            <label for="POSITION" class="SELECT">送貨地點
                                <span class="SELECTERROR">尚未選擇所在位置</span><br>
                                <select id="POSITION" class="SELECTOPTION">
                                    <option value="">請選擇所在位置</option>
                                    <option value="1">台灣</option>
                                </select>
                            </label>
                        </section>
                        <section class="SHOPPINGCART_STEPONETEXT--SELECT">
                            <label for="DELIVERY" class="SELECT">送貨方式
                                <span class="SELECTERROR">尚未選擇送貨方式</span><br>
                                <select id="DELIVERY" class="SELECTOPTION">
                                    <option value="">請選擇送貨方式</option>
                                    <option value="1">7-11店到店取貨</option>
                                </select>
                            </label>
                        </section>
                        <section class="SHOPPINGCART_STEPONETEXT--SELECT LASTBOTTOM">
                            <label for="PAYWAY" class="SELECT">付款方式
                                <span class="SELECTERROR">尚未選擇付款方式</span><br>
                                <select id="PAYWAY" class="SELECTOPTION">
                                    <option value="">請選擇付款方式</option>
                                    <option value="1">到貨付款</option>
                                    <option value="2">信用卡付款</option>
                                </select>
                            </label>
                        </section>
                    </section>
                </section>
                <section class="SHOPPINGCART_STEPONETEXT--RIGHT COL-5 RWD-COL-12">
                    <section class="SHOPPINGCART_STEPONETEXT--FORM">
                        <section class="SHOPPINGCART_STEPONETEXT--TITLE">
                            <span>訂單資訊</span>
                        </section>
                        <section class="SHOPPINGCART_STEPONETEXT--INFO">
                            <section class="SHOPPINGCART_STEPONETEXT--ZONE">
                                <span>小計:</span>
                                <span><b>NT＄<b id="CARTITEMPRICE_SUB"></b></b></span>
                            </section>
                            <section class="SHOPPINGCART_STEPONETEXT--ZONE">
                                <span>運費:</span>
                                <span><b>免運</b></span>
                            </section>
                            <section class="SHOPPINGCART_STEPONETEXT--ZONE">
                                <span>使用優惠劵:</span>
                                <span><b>台灣限定 滿千免運</b></span>
                            </section>
                            <section class="SHOPPINGCART_STEPONETEXT--ZONE STEPONETOTAL">
                                <span>合計:</span>
                                <span><b>NT＄<b id="CARTITEMPRICE_TOTAL"></b></b></span>
                            </section>
                            <a href="./shopping_cartp2.html" class="SHOPPINGCART_STEPONETEXT--PAY">
                                <button class="BTN STEPONEPAY">前往結帳</button>
                            </a>
                        </section>
                    </section>

                </section>

            </section>

        </section>
    </section>

    <!-- ===== TOP按鈕 ===== -->
    <!-- top_btn -->
    @@include('./layout/top_btn.html')
    <!-- top_btn end -->

    <!-- ===== footer ===== -->
    <!-- footer -->
    @@include('./layout/footer.html')
    <!-- footer end -->

    <script src="./js/top_btn.js"></script>
    <script src="./js/nav.js"></script>
    <script src="./js/user_popup.js"></script>
    <script src="./js/toggle.js"></script>
    <script src="./js/user_popup.js"></script>


</body>

<script>
$(document).ready(function() {

    $('#POSITION').on('change', function() {
    var selectedOption = $(this).val();
    if (selectedOption === '') {
        $('.SELECTERROR', $(this).closest('.SHOPPINGCART_STEPONETEXT--SELECT')).addClass('WRONG'); // 添加错误类
    } else {
        $('.SELECTERROR', $(this).closest('.SHOPPINGCART_STEPONETEXT--SELECT')).removeClass('WRONG'); // 移除错误类
        $('#POSITION').removeClass('ERROROUTLINE').addClass('TRUEOUTLINE');
    }
});

    $('#DELIVERY').on('change', function() {
        var selectedOption = $(this).val();
        if (selectedOption === '') {
        $('.SELECTERROR', $(this).closest('.SHOPPINGCART_STEPONETEXT--SELECT')).addClass('WRONG'); // 添加错误类
        } else {
        $('.SELECTERROR', $(this).closest('.SHOPPINGCART_STEPONETEXT--SELECT')).removeClass('WRONG'); // 移除错误类
        $('#DELIVERY').removeClass('ERROROUTLINE').addClass('TRUEOUTLINE');
        }
    });

    $('#PAYWAY').on('change', function() {
        var selectedOption = $(this).val();
        if (selectedOption === '') {
        $('.SELECTERROR', $(this).closest('.SHOPPINGCART_STEPONETEXT--SELECT')).addClass('WRONG'); // 添加错误类
        } else {
        $('.SELECTERROR', $(this).closest('.SHOPPINGCART_STEPONETEXT--SELECT')).removeClass('WRONG'); // 移除错误类
        $('#PAYWAY').removeClass('ERROROUTLINE').addClass('TRUEOUTLINE');
        }
    });
});

$(document).ready(function() {
    $('.STEPONEPAY').click(function(e) {
        var position = $('#POSITION').val();
        var delivery = $('#DELIVERY').val();
        var payway = $('#PAYWAY').val();

        if (position === '') {
        $('.SELECTERROR', $('#POSITION').closest('.SHOPPINGCART_STEPONETEXT--SELECT')).addClass('WRONG'); // 添加错误类
        $('#POSITION').addClass('ERROROUTLINE').removeClass('TRUEOUTLINE');
        } else {
        $('#POSITION').removeClass('ERROROUTLINE').addClass('TRUEOUTLINE');
        }

        if (delivery === '') {
        $('.SELECTERROR', $('#DELIVERY').closest('.SHOPPINGCART_STEPONETEXT--SELECT')).addClass('WRONG'); // 添加错误类
        $('#DELIVERY').addClass('ERROROUTLINE').removeClass('TRUEOUTLINE');
        } else {
        $('#DELIVERY').removeClass('ERROROUTLINE').addClass('TRUEOUTLINE');
        }

        if (payway === '') {
        $('.SELECTERROR', $('#PAYWAY').closest('.SHOPPINGCART_STEPONETEXT--SELECT')).addClass('WRONG'); // 添加错误类
        $('#PAYWAY').addClass('ERROROUTLINE').removeClass('TRUEOUTLINE');
        } else {
        $('#PAYWAY').removeClass('ERROROUTLINE').addClass('TRUEOUTLINE');
        }

        if (position === '' || delivery === '' || payway === '') {
        e.preventDefault(); // 阻止默认的链接跳转行为
        }
    });
});

</script>

<script>
    $(document).ready(function() {
        $('.SHOPPINGCART_ITEM').each(function() {
            var $itemCountNum = $(this).find('.ITEM_COUNT--NUM');
            var $cartItemPrice = $(this).find('.CARTITEM_PRICE');
            var $cartItemSubtotal = $(this).find('.CARTITEMSUBTOTAL');

            // 更新CARTITEMSUBTOTAL的值
            function updateSubtotal() {
            var price = parseFloat($cartItemPrice.text().replace(/[^\d.]/g, ''));
            var quantity = parseInt($itemCountNum.val());
            var subtotal = price * quantity;

            $cartItemSubtotal.text(subtotal);
            }

            // 初始化CARTITEMSUBTOTAL的值
            updateSubtotal();

            // 监听ITEM_COUNT--PLUS按钮的点击事件
            $(this).find('.ITEM_COUNT--PLUS').click(function() {
            var currentValue = parseInt($itemCountNum.val());
            $itemCountNum.val(currentValue + 1);

            updateSubtotal();
            });

            // 监听ITEM_COUNT--MINUS按钮的点击事件
            $(this).find('.ITEM_COUNT--MINUS').click(function() {
            var currentValue = parseInt($itemCountNum.val());
            if (currentValue > 1) {
                $itemCountNum.val(currentValue - 1);

                updateSubtotal();
            }
            });
        });


        function calculateTotal() {
            var total = 0;
            $('.CARTITEMSUBTOTAL').each(function() {
            var subtotal = parseFloat($(this).text().replace(/[^\d.]/g, ''));
            total += subtotal;
            });
            $('#CARTITEMPRICE_TOTAL').text(total);

            // 更新CARTITEMPRICE_SUB的值
            $('#CARTITEMPRICE_SUB').text(total);
        }

        // 初始化总和
        calculateTotal();

        // 监听每个 .CARTITEMSUBTOTAL 的变化
        $('.CARTITEMSUBTOTAL').bind('DOMSubtreeModified', function() {
            calculateTotal();
        });
    });



</script>


</html>