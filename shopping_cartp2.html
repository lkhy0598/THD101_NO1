<!DOCTYPE html>
<html lang="zh-tw">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href='css/style.css'>
    <script src="https://cdn.jsdelivr.net/npm/swiper@9/swiper-bundle.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.3/jquery.min.js"></script>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <link rel="shortcut icon" type="image/png" href="./img/shortcut_logo.png">
    <title>Â°´ÂØ´Ë≥áÊñô SHOPPING_CART - Ê≥¢Ê≥¢ÂãïÁâ©ÈÜ´Èô¢</title>
</head>

<body class="SHOPPINGCARTP2" id="SHOPPINGCART2VUE" onload="showMember()">
    <!-- =============== ÂÖ±Áî®ÂÖÉ‰ª∂ =============== -->

    <!-- ===== ÊúÉÂì°ÂΩàÁ™ó ===== -->
    <!-- user_popup -->
    @@include('./layout/user_popup.html')
    <!-- user_popup end -->

    <!-- =============== header =============== -->
    <!-- header -->
    @@include('./layout/header.html')
    <!-- header end -->

    <!-- =============== Á∂≤È†ÅÂÖßÂÆπ =============== -->

    <section class="SHOPPINGCARTP2BG BACKGROUND">
        <div class="BG_CLOUDS">
            <div class="BG_CLOUD CLOUD_1">
                <img class="BG_CLOUD_IMG1" src="./img/CLOUD_BG.png" alt="">
            </div>
            <div class="BG_CLOUD CLOUD_2">
                <img class="BG_CLOUD_IMG2" src="./img/CLOUD_BG.png" alt="">
            </div>
        </div>
        <!-- ====================================================================================== -->

        <section class="CART02_SLOGANALL WRAPPER">
            <span>
                <img src="./img/shopping_cart/cartp2_slogan01.png" alt="" class="SLOGAN02">
                <img src="./img/shopping_cart/cartp2_slogan01M.png" alt="" class="SLOGAN02M">
            </span>
            <span class="CAT ANI"></span>
        </section>

        <!-- ======================================È∫µÂåÖÂ±ë========================================== -->

        <section class="BREAD WRAPPER">
            <a href="homepage.html">È¶ñÈ†Å</a>
            /
            <a>Ë≥ºÁâ©Ëªä</a>
        </section>

        <!-- ====================================Ë≥ºÁâ©ËªäÁ¨¨‰∫åÊ≠•È©ü=========================================== -->
        <section class="SHOPPINGCART_STEP WRAPPER">
            <section class="SHOPPINGCART_STEPAREA">
                <section class="SHOPPINGCART_ARCONE">
                    <div class="ARC_TITLE">1</div>
                    <p>Ë≥ºÁâ©Ëªä</p>
                </section>
                <section class="SHOPPINGCART_ARCTWO">
                    <div class="ARC_TITLE">2</div>
                    <p>Â°´ÂØ´Ë≥áÊñô</p>
                </section>
                <section class="SHOPPINGCART_ARCTHREE">
                    <div class="ARC_TITLE">3</div>
                    <p>ÁµêÂ∏≥ÊàêÂäü</p>
                </section>
            </section>
        </section>
        <!-- ========================================ÂÉπÊ†ºÂïÜÂìÅÊòéÁ¥∞================================================= -->

        <section class="SHOPPINGCARTP2_ORDER WRAPPER">
            <section class="SHOPPINGCARTP2_ORDERTEXTALL">
                <section class="SHOPPINGCARTP2_ORDERTEXT">
                    <p>ÂêàË®àÔºöNT${{totalAmount}}</p>
                    <span>Ë≥ºÁâ©Ëªä:({{ cartItemCount }}‰ª∂)
                        <span class="SHOPPINGCARTP2_ORDERARR">
                            <img src="./img/shopping/ü¶Ü icon _angle-right-b_.svg" alt="">
                        </span>
                    </span>
                </section>

                <section class="SHOPPINGCART_ALLLIST">

                    <section class="SHOPPINGCART_ITEMFORM ORDERITEM">
                        <section class="SHOPPINGCART_ITEMtitle">
                            <span class="ITEM_PRODUCT--W">ÂïÜÂìÅ</span>
                            <span class="ITEM_PRICE--W">ÂñÆ‰ª∂ÂÉπÊ†º</span>
                            <span class="ITEM_COUNT--W">Êï∏Èáè</span>
                            <span class="ITEM_SUBTOTAL--W">Â∞èË®à</span>
                        </section>

                        <section class="SHOPPINGCART_ITEM" v-for="(item, index) in shoppingCartItems" :key="index">
                            <section class="ITEM_PRODUCT ITEM_PRODUCT--W">
                                <section class="ITEM_PRODUCT--IMG">
                                    <img :src="getFirstImage(item.IMG_SOURCE_ARRAY)" alt="">
                                </section>
                                <span>{{ item.PRODUCT_TITLE }}</span>
                            </section>
                            <section class="ITEM_PRICE ITEM_PRICE--W">
                                <p>NTÔºÑ{{ item.PRODUCT_PRICE }}</p>
                            </section>
                            <section class="ITEM_COUNT ITEM_COUNT--W">
                                <span class="ITEM_COUNT--NUM">{{ item.quantity }}</span>
                            </section>
                            <section class="ITEM_SUBTOTAL ITEM_SUBTOTAL--W">
                                <p>NTÔºÑ{{ item.PRODUCT_PRICE * item.quantity }}</p>
                            </section>
                        </section>
                    </section>
                </section>

                <!-- ========================================ÊâãÊ©üÊùøLIST================================================== -->

                <section class="SHOPPINGCART_ITEMLIST--M">
                    <section class="SHOPPINGCART_ITEM--M" v-for="(item, index) in shoppingCartItems" :key="index">
                        <section class="SHOPPINGCART_ITEMIMG--M">
                            <img :src="getFirstImage(item.IMG_SOURCE_ARRAY)" alt="">
                        </section>
                        <section class="SHOPPINGCART_ITEMWORD--M">
                            <section class="SHOPPINGCART_ITEMWORD--TOPM">
                                <section class="SHOPPINGCART_ITEMWORD--NAMEM">
                                    <span>{{ item.PRODUCT_TITLE }}</span>
                                </section>

                            </section>
                            <section class="SHOPPINGCART_ITEMWORD--BOTTOMM">
                                <section class="SHOPPINGCART_ITEMWORD--COUNTM">
                                    <span class="ITEM_COUNT--NUM">Êï∏Èáè:{{ item.quantity }}</span>
                                </section>
                                <section class="SHOPPINGCART_ITEMWORD--PRICEM">
                                    <p>NTÔºÑ{{ item.PRODUCT_PRICE * item.quantity }}</p>
                                </section>
                            </section>
                        </section>
                    </section>
                </section>

            </section>

            <!-- =========================================gË≥ºÁâ©ËªäP2Ë°®ÂñÆÂ∑¶‰∏ä=============================================== -->

            <section class="SHOPPINGCARTP2_TEXT">
                <section class="SHOPPINGCARTP2_TEXT--TOP">
                    <section class="SHOPPINGCARTP2_STEPTEXT--FORM P2MEMBER COL-6 RWD-COL-12">
                        <section class="SHOPPINGCARTP2_STEPTEXT--TITLE">
                            <span>ÊúÉÂì°Ë≥áÊñô</span>
                        </section>
                        <section class="SHOPPINGCARTP2_STEPTEXT--INPUT">
                            <label for="MEMBERNAME" class="INPUT">ÂßìÂêç<br>
                                <input type="text" id="MEMBERNAME" class="INPUTENTER" placeholder="Ë´ãËº∏ÂÖ•ÊúÉÂì°ÂêçÁ®±" readonly>
                            </label>
                        </section>

                        <section class="SHOPPINGCARTP2_STEPTEXT--INPUT">
                            <label for="MEMBERMAIL" class="INPUT">ÈõªÂ≠ê‰ø°ÁÆ±<br>
                                <input type="text" id="MEMBERMAIL" class="INPUTENTER" placeholder="Ë´ãËº∏ÂÖ•ÈõªÂ≠ê‰ø°ÁÆ±" readonly>
                            </label>
                        </section>

                        <section class="SHOPPINGCARTP2_STEPTEXT--INPUT">
                            <label for="MEMBERPHONE" class="INPUT">ÈÄ£Áµ°ÈõªË©±<br>
                                <input type="text" id="MEMBERPHONE" class="INPUTENTER" placeholder="Ë´ãËº∏ÂÖ•ÈõªË©±ËôüÁ¢º" readonly>
                            </label>
                        </section>

                        <section class="SHOPPINGCARTP2_STEPTEXT--INPUT">
                            <span>Ëã•ÊúÉÂì°Ë≥áÊñôÊúâË™§ÔºåÂª∫Ë≠∞ÂâçÂæÄÊúÉÂì°‰∏≠ÂøÉÈÄ≤Ë°å‰øÆÊîπÔºå‰ª•Èò≤‰πãÂæå‰ªçÂ∏∂ÂÖ•ÈåØË™§Ë≥áË®ä„ÄÇ</span>
                            <div>
                                <a href="./member_center.html">
                                <button class="BTN">ÂâçÂæÄÊúÉÂì°‰∏≠ÂøÉ</button>
                                </a>
                            </div>
                        </section>

                    </section>

                    <!-- ==========================================Ë≥ºÁâ©ËªäP2Ë°®ÂñÆÂè≥‰∏ä============================================= -->


                    <section class="SHOPPINGCARTP2_STEPTEXT--FORM P2MEMBER COL-6 RWD-COL-12">
                        <section class="SHOPPINGCARTP2_STEPTEXT--TITLE">
                            <span>Êî∂‰ª∂Ë≥áÊñô</span>
                            <label for="samemember" class="SAMEMEMBER">
                                <input type="checkbox" value="ture" id="samemember" name="MEMBERINFO">
                                <span class="CHECKMEMBER"></span>
                                ÂêåÊúÉÂì°Ë≥áÊñô
                            </label>
                        </section>
                        <section class="SHOPPINGCARTP2_STEPTEXT--INPUT">
                            <label for="RECIPIENT" class="INPUT">ÂßìÂêç
                                <span class="INPUTERROR">ÂßìÂêç‰∏çÂèØÁÇ∫Á©∫ÁôΩ</span>
                                <span class="INPUTERROR2">Ë´ãËº∏ÂÖ•Ê≠£Á¢∫ÂßìÂêç</span><br>
                                <input type="text" id="RECIPIENT" class="INPUTENTER" placeholder="Ë´ãËº∏ÂÖ•Êî∂‰ª∂‰∫∫ÂêçÁ®±">
                            </label>
                        </section>

                        <section class="SHOPPINGCARTP2_STEPTEXT--INPUT">
                            <label for="CARTINBOX" class="INPUT">ÈõªÂ≠ê‰ø°ÁÆ±
                                <span class="INPUTERROR">‰ø°ÁÆ±‰∏çÂèØÁÇ∫Á©∫ÁôΩ</span>
                                <span class="INPUTERROR2">Ë´ãËº∏ÂÖ•Ê≠£Á¢∫ÈõªÂ≠ê‰ø°ÁÆ±</span><br>
                                <input type="text" id="CARTINBOX" class="INPUTENTER" placeholder="Ë´ãËº∏ÂÖ•Êî∂‰ª∂‰∫∫ÈõªÂ≠ê‰ø°ÁÆ±">
                            </label>
                        </section>

                        <section class="SHOPPINGCARTP2_STEPTEXT--INPUT">
                            <label for="RECIPIENTPHONE" class="INPUT">ÈÄ£Áµ°ÊâãÊ©ü
                                <span class="INPUTERROR">ÈÄ£Áµ°ÈõªË©±‰∏çÂèØÁÇ∫Á©∫ÁôΩ</span>
                                <span class="INPUTERROR2">Ë´ãËº∏ÂÖ•Ê≠£Á¢∫ÈÄ£Áµ°ÈõªË©±</span><br>
                                <input type="text" id="RECIPIENTPHONE" class="INPUTENTER" placeholder="Ë´ãËº∏ÂÖ•Êî∂‰ª∂‰∫∫ÈõªË©±ËôüÁ¢º">
                            </label>
                        </section>

                        <section class="SHOPPINGCARTP2_STEPTEXT--INPUT">
                            <span>ÈÅ∏ÊìáÈñÄÂ∏Ç</span>
                            <div>
                                <button class="BTN">ÊêúÂ∞ãÈñÄÂ∏Ç</button>
                            </div>
                        </section>

                    </section>



                </section>



                <section class="SHOPPINGCARTP2_TEXT--BOTTOM">


                    <!-- =========================================Ë≥ºÁâ©ËªäP2Ë°®ÂñÆÂ∑¶‰∏ã=============================================== -->

                    <section class="SHOPPINGCARTP2_STEPTEXT--FORM COL-6 RWD-COL-12">
                        <section class="SHOPPINGCARTP2_STEPTEXT--TITLE">
                            <span>‰ªòÊ¨æË≥áÊñô</span>
                        </section>

                        <span class="SHOPPINGCARTP2_STEPTEXT--REMIND">
                            Â∑≤ÈÅ∏ÊìáÁöÑÈÄÅË≤®ÊñπÂºèÔºö7-11Â∫óÂà∞Â∫óÂèñË≤®‰ªòÊ¨æ
                        </span>
                        <section class="SHOPPINGCARTP2_STEPTEXT--HALF">

                            <section class="SHOPPINGCARTP2_STEPTEXT--HALFINPUT">
                                <label for="CARDOWNER" class="INPUT">ÊåÅÂç°‰∫∫ÂßìÂêç
                                    <span class="INPUTERROR">ÂßìÂêç‰∏çÂèØÁÇ∫Á©∫ÁôΩ</span>
                                    <span class="INPUTERROR2">Ë´ãËº∏ÂÖ•Ê≠£Á¢∫ÂßìÂêç</span><br>
                                    <input type="text" id="CARDOWNER" class="INPUTENTER" placeholder="Ë´ãËº∏ÂÖ•ÊåÅÂç°‰∫∫ÂßìÂêç" :disabled="paymentId === '2'">
                                </label>
                            </section>

                            <section class="SHOPPINGCARTP2_STEPTEXT--HALFINPUT">
                                <label for="CARDNUMBER" class="INPUT">‰ø°Áî®Âç°Âç°Ëôü
                                    <span class="INPUTERROR">Âç°Ëôü‰∏çÂèØÁÇ∫Á©∫ÁôΩ</span>
                                    <span class="INPUTERROR2">Ë´ãËº∏ÂÖ•Ê≠£Á¢∫Âç°Ëôü</span><br>
                                    <input type="text" id="CARDNUMBER" class="INPUTENTER"
                                        placeholder="0000-0000-0000-0000" :disabled="paymentId === '2'">
                                </label>
                            </section>

                            <section class="SHOPPINGCARTP2_STEPTEXT--HALFINPUT">
                                <label for="CARDEXPIRYDATE" class="INPUT">ÊúâÊïàÊó•Êúü
                                    <span class="INPUTERROR">Êó•Êúü‰∏çÂèØÁÇ∫Á©∫ÁôΩ</span>
                                    <span class="INPUTERROR2">Ë´ãËº∏ÂÖ•Ê≠£Á¢∫Êó•Êúü</span><br>
                                    <input type="text" id="CARDEXPIRYDATE" class="INPUTENTER" placeholder="MM/YY" :disabled="paymentId === '2'">
                                </label>
                            </section>

                            <section class="SHOPPINGCARTP2_STEPTEXT--HALFINPUT">
                                <label for="CARDCVC" class="INPUT">ÂÆâÂÖ®Á¢º(CVC)
                                    <span class="INPUTERROR">ÂÆâÂÖ®Á¢º‰∏çÂèØÁÇ∫Á©∫ÁôΩ</span>
                                    <span class="INPUTERROR2">Ë´ãËº∏ÂÖ•Ê≠£Á¢∫ÂÆâÂÖ®Á¢º</span><br>
                                    <input type="text" id="CARDCVC" class="INPUTENTER" placeholder="Ë´ãËº∏ÂÖ•‰∏â‰ΩçÊï∏ÂÆâÂÖ®Á¢º" :disabled="paymentId === '2'">
                                </label>
                            </section>

                        </section>

                        <section class="SHOPPINGCARTP2_STEPTEXT--INPUT">
                            <span
                                class="CREDITREMIND">ÊàëÂÄë‰ΩøÁî®„ÄåÁ∂†ÁïåÁßëÊäÄECPayÊîØ‰ªòÂπ≥Âè∞Á≥ªÁµ±„ÄçÔºåÁ∂≤È†ÅÂ∞áÊúÉËΩâÂæÄÁ∂†Áïå‰ø°Áî®Âç°ÊéàÊ¨äÈ†ÅÈù¢Ôºõ‰∫§ÊòìÂÖ®Á®ã‰ΩøÁî®SSLÂÆâÂÖ®Ê©üÂà∂ÔºåÁ¢∫‰øù‰∫§ÊòìË≥áÊñô‰∏çÊúÉÂ§ñÊ¥©ÔºåË´ãÊÇ®ÂÆâÂøÉ‰ªòÊ¨æÔºÅ</span>
                        </section>

                    </section>


                    <!-- =========================================Ë≥ºÁâ©ËªäP2Ë°®ÂñÆÂè≥‰∏ã=============================================== -->

                    <section class="SHOPPINGCARTP2_STEPTEXT--FORM COL-6 RWD-COL-12">
                        <section class="SHOPPINGCARTP2_STEPTEXT--TITLE">
                            <span>Ë®ÇÂñÆÂÇôË®ª</span>
                        </section>

                        <section class="SHOPPINGCARTP2_STEPTEXT--INPUT">
                            <label for="MEMO" class="TEXTAREA">ÂÇôË®ª<br>
                                <textarea id="MEMO" placeholder="Êúâ‰ªÄÈ∫ºÊÉ≥ÂëäË®¥Ë≥£ÂÆ∂ÁöÑ..." class="TEXTAREA_CONTENT"></textarea>
                            </label>
                        </section>

                    </section>

                </section>

            </section>
            <!-- ===================================ÁµêÂ∏≥È†ÅÊúÄÂæå============================================= -->

            <section class="SHOPPINGCARTP2_FINALLINK">
                <section>
                    <a href="./shopping_cart.html">ËøîÂõûË≥ºÁâ©Ëªä</a>
                    <a href="#">
                        <button class="BTN" id="SHOPPINGCARTP2PAY" @click="handlePayment">‰ªòÊ¨æ</button>
                    </a>
                </section>
            </section>

        </section>
    </section>
        <!-- ===== TOPÊåâÈàï ===== -->
        <!-- top_btn -->
        @@include('./layout/top_btn.html')
        <!-- top_btn end -->
        
    <script src="./js/vendors/vue/vue.global.js"></script>
    <script src="./js/shopping_cart2.js"></script>
    <script src="./js/top_btn.js"></script>
    <script src="./js/nav.js"></script>
    <script src="./js/user_popup.js"></script>
    <script src="./js/toggle.js"></script>

    <script>
        $(document).ready(function() {
            $('#RECIPIENT').on('blur', function() {
                var recipientInput = $(this);
                var recipientValue = recipientInput.val().trim();
                var errorElement1 = recipientInput.siblings('.INPUTERROR');
                var errorElement2 = recipientInput.siblings('.INPUTERROR2');

                var recipientRegex = /^[\u4E00-\u9FFFa-zA-Z\s]+$/;
                if (recipientValue === '') {
                errorElement1.addClass('WRONG');
                errorElement2.removeClass('WRONG');
                } else if (recipientValue.length < 2 || !recipientRegex.test(recipientValue)) {
                errorElement1.removeClass('WRONG');
                errorElement2.addClass('WRONG');
                } else {
                errorElement1.removeClass('WRONG');
                errorElement2.removeClass('WRONG');
                $('#RECIPIENT').addClass('TRUEOUTLINE').removeClass('ERROROUTLINE');
                }
            });

            $('#CARTINBOX').on('blur', function() {
                var emailInput = $(this);
                var emailValue = emailInput.val().trim();
                var errorElement1 = emailInput.siblings('.INPUTERROR');
                var errorElement2 = emailInput.siblings('.INPUTERROR2');

                var emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
                if (emailValue === '') {
                errorElement1.addClass('WRONG');
                errorElement2.removeClass('WRONG');
                } else if (!emailRegex.test(emailValue)) {
                errorElement1.removeClass('WRONG');
                errorElement2.addClass('WRONG');
                } else {
                errorElement1.removeClass('WRONG');
                errorElement2.removeClass('WRONG');
                $('#CARTINBOX').addClass('TRUEOUTLINE').removeClass('ERROROUTLINE');
                }
            });

            $('#RECIPIENTPHONE').on('blur', function() {
                var phoneInput = $(this);
                var phoneValue = phoneInput.val().trim();
                var errorElement1 = phoneInput.siblings('.INPUTERROR');
                var errorElement2 = phoneInput.siblings('.INPUTERROR2');

                var phoneRegex = /^(\+?886-?|0)?9\d{8}$/;

                if (phoneValue === '') {
                errorElement1.addClass('WRONG');
                errorElement2.removeClass('WRONG');
                } else if (!phoneRegex.test(phoneValue)) {
                errorElement1.removeClass('WRONG');
                errorElement2.addClass('WRONG');
                } else {
                errorElement1.removeClass('WRONG');
                errorElement2.removeClass('WRONG');
                $('#RECIPIENTPHONE').addClass('TRUEOUTLINE').removeClass('ERROROUTLINE');
                }
            });
        });

// ===========================================================================

    $(document).ready(function() {
        $('#samemember').change(function() {
            if ($(this).is(':checked')) {
            var memberNameValue = $('#MEMBERNAME').val();
            var memberMailValue = $('#MEMBERMAIL').val();
            var memberPhoneValue = $('#MEMBERPHONE').val();

            $('#RECIPIENT').val(memberNameValue).siblings('.INPUTERROR, .INPUTERROR2').removeClass('WRONG');
            $('#RECIPIENT').addClass('TRUEOUTLINE').removeClass('ERROROUTLINE');
            $('#CARTINBOX').val(memberMailValue).siblings('.INPUTERROR, .INPUTERROR2').removeClass('WRONG');
            $('#CARTINBOX').addClass('TRUEOUTLINE').removeClass('ERROROUTLINE');
            $('#RECIPIENTPHONE').val(memberPhoneValue).siblings('.INPUTERROR, .INPUTERROR2').removeClass('WRONG');
            $('#RECIPIENTPHONE').addClass('TRUEOUTLINE').removeClass('ERROROUTLINE');
            } else {
            $('#RECIPIENT').val('');
            $('#CARTINBOX').val('');
            $('#RECIPIENTPHONE').val('');
            }
        });
    });

// ======================================================================================

    $(document).ready(function() {
        $('#CARDNUMBER').on('input', function() {
            var cardNumber = $(this).val().replace(/-/g, ''); // ÁßªÈô§ÊâÄÊúâÁé∞ÊúâÁöÑËøûÂ≠óÁ¨¶

            if (cardNumber.length > 0) {
            // ÊØèÂõõ‰∏™Êï∞Â≠óÊèíÂÖ•ËøûÂ≠óÁ¨¶
            var formattedCardNumber = cardNumber.match(/.{1,4}/g).join('-');

            // Â¶ÇÊûúÊï∞Â≠óÈïøÂ∫¶Ë∂ÖËøá16‰ΩçÔºåÂàôÁßªÈô§ÊúÄÂêéÁöÑËøûÂ≠óÁ¨¶
            if (cardNumber.length > 16) {
                formattedCardNumber = formattedCardNumber.slice(0, -1);
            }

            // Â¶ÇÊûúÊ†ºÂºèÂåñÂêéÁöÑÂç°Âè∑ÈïøÂ∫¶Ë∂ÖËøá19‰ΩçÔºåÂàôÊà™ÂèñÂâç19‰Ωç
            if (formattedCardNumber.length > 19) {
                formattedCardNumber = formattedCardNumber.slice(0, 19);
            }

            $(this).val(formattedCardNumber);
            }
        });
    });

// =======================================================================================

    $(document).ready(function() {
            $('#CARDOWNER').on('blur', function() {
                var cardownerInput = $(this);
                var cardownerValue = cardownerInput.val().trim();
                var errorElement1 = cardownerInput.siblings('.INPUTERROR');
                var errorElement2 = cardownerInput.siblings('.INPUTERROR2');

                var cardownerRegex = /^[\u4E00-\u9FFFa-zA-Z\s]+$/;
                if (cardownerValue === '') {
                errorElement1.addClass('WRONG');
                errorElement2.removeClass('WRONG');
                } else if (cardownerValue.length < 2 || !cardownerRegex.test(cardownerValue)) {
                errorElement1.removeClass('WRONG');
                errorElement2.addClass('WRONG');
                } else {
                errorElement1.removeClass('WRONG');
                errorElement2.removeClass('WRONG');
                $('#CARDOWNER').addClass('TRUEOUTLINE').removeClass('ERROROUTLINE');
                }
            });

            $('#CARDEXPIRYDATE').on('input', function() {
                var cardexpirydateInput = $(this).val();
                var numbers = cardexpirydateInput.replace(/\D/g, ''); // ÁßªÈô§ÈùûÊï∏Â≠óÂ≠óÁ¨¶

                
                // ÊØèÂÖ©ÂÄãÊï∏Â≠óÊèíÂÖ•ÊñúÁ∑ö
                var formatted = numbers.match(/.{1,2}/g).join('/');

                // Â¶ÇÊûúÈï∑Â∫¶Ë∂ÖÈÅé5ÂÄãÂ≠óÂÖÉÔºåÂâáÊà™Êñ∑
                if (formatted.length > 5) {
                formatted = formatted.substr(0, 5);
                }

                $(this).val(formatted);
            });

            $('#CARDEXPIRYDATE').on('blur', function() {
                var cardexpirydateInput = $(this);
                var cardexpirydateValue = cardexpirydateInput.val().trim();
                var errorElement1 = cardexpirydateInput.siblings('.INPUTERROR');
                var errorElement2 = cardexpirydateInput.siblings('.INPUTERROR2');

                if (cardexpirydateValue === '') {
                errorElement1.addClass('WRONG');
                errorElement2.removeClass('WRONG');
                } else if (cardexpirydateValue.length < 4 ) {
                errorElement1.removeClass('WRONG');
                errorElement2.addClass('WRONG');
                } else {
                errorElement1.removeClass('WRONG');
                errorElement2.removeClass('WRONG');
                $('#CARDEXPIRYDATE').addClass('TRUEOUTLINE').removeClass('ERROROUTLINE');
                }
            });

            $('#CARDEXPIRYDATE').on('keydown', function(event) {
                var key = event.which || event.keyCode;
                
                // Âè™ÂÖÅË®±Êï∏Â≠ó„ÄÅÂà™Èô§ÈçµÂíåÊñπÂêëÈçµÁöÑ‰ΩøÁî®
                if (!(key >= 48 && key <= 57) && key !== 8 && key !== 37 && key !== 39) {
                    event.preventDefault();
                }
            });

            $('#CARDCVC').on('input', function() {
                var cardcvcInput = $(this).val();
                var numbers = cardcvcInput.replace(/\D/g, ''); // ÁßªÈô§ÈùûÊï∏Â≠óÂ≠óÁ¨¶

                // Â¶ÇÊûúÈï∑Â∫¶Ë∂ÖÈÅé5ÂÄãÂ≠óÂÖÉÔºåÂâáÊà™Êñ∑
                if (numbers.length > 3) {
                    numbers = numbers.substr(0, 3);
                }

                $(this).val(numbers);
            });

            $('#CARDCVC').on('blur', function() {
                var cardcvcInput = $(this);
                var cardcvcValue = cardcvcInput.val().trim();
                var errorElement1 = cardcvcInput.siblings('.INPUTERROR');
                var errorElement2 = cardcvcInput.siblings('.INPUTERROR2');

                if (cardcvcValue === '') {
                errorElement1.addClass('WRONG');
                errorElement2.removeClass('WRONG');
                } else if (cardcvcValue.length < 3 ) {
                errorElement1.removeClass('WRONG');
                errorElement2.addClass('WRONG');
                } else {
                errorElement1.removeClass('WRONG');
                errorElement2.removeClass('WRONG');
                $('#CARDCVC').addClass('TRUEOUTLINE').removeClass('ERROROUTLINE');
                }
            });

            $('#CARDCVC').on('keydown', function(event) {
                var key = event.which || event.keyCode;
                
                // Âè™ÂÖÅË®±Êï∏Â≠ó„ÄÅÂà™Èô§ÈçµÂíåÊñπÂêëÈçµÁöÑ‰ΩøÁî®
                if (!(key >= 48 && key <= 57) && key !== 8 && key !== 37 && key !== 39) {
                    event.preventDefault();
                }
            });

// =======================================================================================

            $("#CARDNUMBER").on("input", function() {
                let cardNum = $(this).val();
                let newCardNum = cardNum.replace(/-/g, "");
                let sum = evenNum(newCardNum) + oddNum(newCardNum);
                let resultNum = sum % 10;
                if (resultNum !== 0) {
                    resultNum = 10 - resultNum;
                }

                var errorElement1 = $(this).siblings('.INPUTERROR');
                var errorElement2 = $(this).siblings('.INPUTERROR2');
                if (resultNum !== newCardNum[15] * 1) {
                    errorElement1.removeClass('WRONG');
                    errorElement2.addClass("WRONG");
                } else {
                    errorElement2.removeClass("WRONG");
                    $('#CARDNUMBER').addClass('TRUEOUTLINE').removeClass('ERROROUTLINE');
                }
                });

                // ÂÅ∂Êï∞‰ΩçÂä†ÊÄª
                function evenNum(newCardNum) {
                let sum = 0;
                for (let i = 1; i <= 13; i += 2) {
                    let resultNum = Number(newCardNum[i]);
                    sum += resultNum;
                }
                return sum;
                }

                // Â•áÊï∞‰ΩçÂä†ÊÄª
                function oddNum(newCardNum) {
                let sum = 0;
                for (let i = 0; i <= 15; i += 2) {
                    let resultNum = Number(newCardNum[i]) * 2;
                    if (resultNum >= 10) {
                    resultNum -= 9;
                    }
                    sum += resultNum;
                }
                return sum;
                }

                $('#CARDNUMBER').on('blur', function() {
                    var errorElement1 = $(this).siblings('.INPUTERROR');
                    var errorElement2 = $(this).siblings('.INPUTERROR2');

                    if ($(this).val().trim() === '') {
                        errorElement1.addClass('WRONG');
                        errorElement2.removeClass('WRONG');
                    } else if (!errorElement2.hasClass('WRONG')) {
                        errorElement1.removeClass('WRONG');
                        $('#CARDNUMBER').addClass('TRUEOUTLINE').removeClass('ERROROUTLINE');
                    }
                });
        });


    </script>

    <!-- <script>//‰∏ã‰∏ÄÈ†ÅÊåâÈàïÈ©óË≠â
        $(document).ready(function() {
            // ÈªûÊìä SHOPPINGCARTP2PAY ÊåâÈàïÊôÇËß∏Áôº‰∫ã‰ª∂
            $('#SHOPPINGCARTP2PAY').click(function(event) {
                // ÂÅúÊ≠¢Ë°®ÂñÆÁöÑÈ†êË®≠Êèê‰∫§Ë°åÁÇ∫
                event.preventDefault();

                // ÂÜçÊ¨°Âü∑Ë°åÈ©óË≠â‰∏¶Ê™¢Êü•ÊòØÂê¶ÈÄöÈÅé
                if (validateForm()) {
                // È©óË≠âÈÄöÈÅéÔºåË∑≥ËΩâÂà∞‰∏ã‰∏ÄÈ†Å
                window.location.href = './shopping_cartp3.html';
                }
            });

            function validateForm() {
                var isValid = true;

                // ÈÄ≤Ë°åÊî∂‰ª∂‰∫∫ÂßìÂêç(RECIPIENT)ÁöÑÈ©óË≠â
                var recipientInput = $('#RECIPIENT');
                var recipientValue = recipientInput.val().trim();
                var errorElement1 = recipientInput.siblings('.INPUTERROR');
                var errorElement2 = recipientInput.siblings('.INPUTERROR2');

                var recipientRegex = /^[\u4E00-\u9FFFa-zA-Z\s]+$/;
                if (recipientValue.trim() === '') {
                errorElement1.addClass('WRONG');
                errorElement2.removeClass('WRONG');
                $('#RECIPIENT').addClass('ERROROUTLINE').removeClass('TRUEOUTLINE');
                isValid = false;
                } else if (recipientValue.length < 2 || !recipientRegex.test(recipientValue)) {
                errorElement1.removeClass('WRONG');
                errorElement2.addClass('WRONG');
                $('#RECIPIENT').addClass('ERROROUTLINE').removeClass('TRUEOUTLINE');
                isValid = false;
                } else {
                errorElement1.removeClass('WRONG');
                errorElement2.removeClass('WRONG');
                }

                // ÈÄ≤Ë°åÈõªÂ≠ê‰ø°ÁÆ±(CARTINBOX)ÁöÑÈ©óË≠â
                var emailInput = $('#CARTINBOX');
                var emailValue = emailInput.val().trim();
                var emailErrorElement1 = emailInput.siblings('.INPUTERROR');
                var emailErrorElement2 = emailInput.siblings('.INPUTERROR2');

                var emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
                if (emailValue === '') {
                emailErrorElement1.addClass('WRONG');
                emailErrorElement2.removeClass('WRONG');
                $('#CARTINBOX').addClass('ERROROUTLINE').removeClass('TRUEOUTLINE');
                isValid = false;
                } else if (!emailRegex.test(emailValue)) {
                emailErrorElement1.removeClass('WRONG');
                emailErrorElement2.addClass('WRONG');
                $('#CARTINBOX').addClass('ERROROUTLINE').removeClass('TRUEOUTLINE');
                isValid = false;
                } else {
                emailErrorElement1.removeClass('WRONG');
                emailErrorElement2.removeClass('WRONG');
                }

                // ÈÄ≤Ë°åÈÄ£Áµ°ÊâãÊ©ü(RECIPIENTPHONE)ÁöÑÈ©óË≠â
                var phoneInput = $('#RECIPIENTPHONE');
                var phoneValue = phoneInput.val().trim();
                var phoneErrorElement1 = phoneInput.siblings('.INPUTERROR');
                var phoneErrorElement2 = phoneInput.siblings('.INPUTERROR2');

                var phoneRegex = /^(\+?886-?|0)?9\d{8}$/;
                if (phoneValue === '') {
                phoneErrorElement1.addClass('WRONG');
                phoneErrorElement2.removeClass('WRONG');
                $('#RECIPIENTPHONE').addClass('ERROROUTLINE').removeClass('TRUEOUTLINE');
                isValid = false;
                } else if (!phoneRegex.test(phoneValue)) {
                phoneErrorElement1.removeClass('WRONG');
                phoneErrorElement2.addClass('WRONG');
                $('#RECIPIENTPHONE').addClass('ERROROUTLINE').removeClass('TRUEOUTLINE');
                isValid = false;
                } else {
                phoneErrorElement1.removeClass('WRONG');
                phoneErrorElement2.removeClass('WRONG');
                }

                var cardNumberInput = $('#CARDNUMBER');
                var cardNumberValue = cardNumberInput.val().replace(/-/g, ''); // ÁßªÈô§ÊâÄÊúâÁèæÊúâÁöÑÈÄ£Â≠óÁ¨¶
                var cardNumberErrorElement1 = cardNumberInput.siblings('.INPUTERROR');
                var cardNumberErrorElement2 = cardNumberInput.siblings('.INPUTERROR2');

                if (cardNumberValue === '') {
                cardNumberErrorElement1.addClass('WRONG');
                cardNumberErrorElement2.removeClass('WRONG');
                $('#CARDNUMBER').addClass('ERROROUTLINE').removeClass('TRUEOUTLINE');
                isValid = false;
                } else if (!isValidLuhn(cardNumberValue)) {
                cardNumberErrorElement1.removeClass('WRONG');
                cardNumberErrorElement2.addClass('WRONG');
                $('#CARDNUMBER').addClass('ERROROUTLINE').removeClass('TRUEOUTLINE');
                isValid = false;
                } else {
                cardNumberErrorElement1.removeClass('WRONG');
                cardNumberErrorElement2.removeClass('WRONG');
                }

                function isValidLuhn(cardNumber) {
                    let newCardNum = cardNumber.replace(/-/g, "");
                    let sum = evenNum(newCardNum) + oddNum(newCardNum);
                    let resultNum = sum % 10;
                    if (resultNum !== 0) {
                        resultNum = 10 - resultNum;
                    }
                    return resultNum === newCardNum[15] * 1;
                    }

                    // ÂÅ∂Êï∞‰ΩçÂä†ÊÄª
                    function evenNum(newCardNum) {
                    let sum = 0;
                    for (let i = 1; i <= 13; i += 2) {
                        let resultNum = Number(newCardNum[i]);
                        sum += resultNum;
                    }
                    return sum;
                    }

                    // Â•áÊï∞‰ΩçÂä†ÊÄª
                    function oddNum(newCardNum) {
                    let sum = 0;
                    for (let i = 0; i <= 15; i += 2) {
                        let resultNum = Number(newCardNum[i]) * 2;
                        if (resultNum >= 10) {
                        resultNum -= 9;
                        }
                        sum += resultNum;
                    }
                    return sum;
                    }

                // ÈÄ≤Ë°åÊåÅÂç°‰∫∫ÂßìÂêç(CARDOWNER)ÁöÑÈ©óË≠â
                var cardOwnerInput = $('#CARDOWNER');
                var cardOwnerValue = cardOwnerInput.val().trim();
                var cardOwnerErrorElement1 = cardOwnerInput.siblings('.INPUTERROR');
                var cardOwnerErrorElement2 = cardOwnerInput.siblings('.INPUTERROR2');

                var cardOwnerRegex = /^[\u4E00-\u9FFFa-zA-Z\s]+$/;
                if (cardOwnerValue === '') {
                cardOwnerErrorElement1.addClass('WRONG');
                cardOwnerErrorElement2.removeClass('WRONG');
                $('#CARDOWNER').addClass('ERROROUTLINE').removeClass('TRUEOUTLINE');
                isValid = false;
                } else if (cardOwnerValue.length < 2 || !cardOwnerRegex.test(cardOwnerValue)) {
                cardOwnerErrorElement1.removeClass('WRONG');
                cardOwnerErrorElement2.addClass('WRONG');
                $('#CARDOWNER').addClass('ERROROUTLINE').removeClass('TRUEOUTLINE');
                isValid = false;
                } else {
                cardOwnerErrorElement1.removeClass('WRONG');
                cardOwnerErrorElement2.removeClass('WRONG');
                }

                // ÈÄ≤Ë°å‰ø°Áî®Âç°ÊúâÊïàÊúüÈôê(CARDEXPIRYDATE)ÁöÑÈ©óË≠â
                var cardExpiryDateInput = $('#CARDEXPIRYDATE');
                var cardExpiryDateValue = cardExpiryDateInput.val().trim();
                var cardExpiryDateErrorElement1 = cardExpiryDateInput.siblings('.INPUTERROR');
                var cardExpiryDateErrorElement2 = cardExpiryDateInput.siblings('.INPUTERROR2');

                if (cardExpiryDateValue === '') {
                cardExpiryDateErrorElement1.addClass('WRONG');
                cardExpiryDateErrorElement2.removeClass('WRONG');
                $('#CARDEXPIRYDATE').addClass('ERROROUTLINE').removeClass('TRUEOUTLINE');
                isValid = false;
                } else if (cardExpiryDateValue.length < 4) {
                cardExpiryDateErrorElement1.removeClass('WRONG');
                cardExpiryDateErrorElement2.addClass('WRONG');
                $('#CARDEXPIRYDATE').addClass('ERROROUTLINE').removeClass('TRUEOUTLINE');
                isValid = false;
                } else {
                cardExpiryDateErrorElement1.removeClass('WRONG');
                cardExpiryDateErrorElement2.removeClass('WRONG');
                }

                // ÈÄ≤Ë°å‰ø°Áî®Âç°ÂÆâÂÖ®Á¢º(CARDCVC)ÁöÑÈ©óË≠â
                var cardCVCInput = $('#CARDCVC');
                var cardCVCValue = cardCVCInput.val().trim();
                var cardCVCErrorElement1 = cardCVCInput.siblings('.INPUTERROR');
                var cardCVCErrorElement2 = cardCVCInput.siblings('.INPUTERROR2');

                if (cardCVCValue === '') {
                cardCVCErrorElement1.addClass('WRONG');
                cardCVCErrorElement2.removeClass('WRONG');
                $('#CARDCVC').addClass('ERROROUTLINE').removeClass('TRUEOUTLINE');
                isValid = false;
                } else if (cardCVCValue.length < 3) {
                cardCVCErrorElement1.removeClass('WRONG');
                cardCVCErrorElement2.addClass('WRONG');
                $('#CARDCVC').addClass('ERROROUTLINE').removeClass('TRUEOUTLINE');
                isValid = false;
                } else {
                cardCVCErrorElement1.removeClass('WRONG');
                cardCVCErrorElement2.removeClass('WRONG');
                }

                return isValid;

            }



        })
    </script> -->




</body>

</html>